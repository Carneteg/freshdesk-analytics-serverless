"use strict";(()=>{var e={};e.id=321,e.ids=[321],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9534:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>_,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{GET:()=>d});var s=r(9303),a=r(8716),i=r(670),o=r(7070);function u(e,t){return(new Date(t).getTime()-new Date(e).getTime())/6e4}function c(e,t){if(0===e.length)return null;let r=[...e].sort((e,t)=>e-t),n=t/100*(r.length-1),s=Math.floor(n),a=n-s;return r[s]*(1-a)+r[Math.ceil(n)]*a}async function d(){try{let e=await Object(function(){var e=Error("Cannot find module '../../_lib/freshdesk'");throw e.code="MODULE_NOT_FOUND",e}())(),t=[2,3,6],r=[4,5],n=e.filter(e=>t.includes(e.status)),s=e.filter(e=>r.includes(e.status)),a=[];for(let t of e.slice(0,100))try{let e=(await Object(function(){var e=Error("Cannot find module '../../_lib/freshdesk'");throw e.code="MODULE_NOT_FOUND",e}())(t.id)).find(e=>!e.incoming&&(!1===e.private||void 0===e.private));if(e){let r=u(t.created_at,e.created_at);r>=0&&a.push(r)}}catch(e){}let i=[];for(let e of s){let t=u(e.created_at,e.updated_at);t>=0&&i.push(t)}return o.NextResponse.json({total_tickets:e.length,open_tickets:n.length,closed_tickets:s.length,median_frt_minutes:c(a,50),p90_frt_minutes:c(a,90),median_resolution_minutes:c(i,50),p90_resolution_minutes:c(i,90)})}catch(e){return o.NextResponse.json({error:e.message},{status:500})}}!function(){var e=Error("Cannot find module '../../_lib/freshdesk'");throw e.code="MODULE_NOT_FOUND",e}();let l=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/metrics/summary/route",pathname:"/api/metrics/summary",filename:"route",bundlePath:"app/api/metrics/summary/route"},resolvedPagePath:"/workspaces/freshdesk-analytics-serverless/dashboard/app/api/metrics/summary/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:f}=l,h="/api/metrics/summary/route";function _(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,972],()=>r(9534));module.exports=n})();